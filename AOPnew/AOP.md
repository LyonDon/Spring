

[TOC]



## 什么是AOP及AOP的实现方式

AOP：面向切面编程，与OOP相结合，将代码的核心关注点与横切关注点分割开来，有利于降低耦合度，减少重复代码，有利于未来的可操作性和可维护性

>切面：将所有业务逻辑都会碰到的逻辑或责任封装到一个可重用模块，命名为aspect，这种散布在各处的无关代码称为横切。其是垂直于业务逻辑的，每一层的业务逻辑都会在一个特定的时间点或者事物执行点碰到切面**

AOP将软件系统分为：

*	核心关注点：业务逻辑的主要流程
*	横切关注点：散布在各处的相同的代码，比如日志，事务等

AOP的实现方式：

*	预编译（基于AspectJ的方式）
*	运行期动态代理
	*	JDK动态代理
	*	CGLib动态代理

***

## AOP基本概念
#### 切面（Aspect）

>类是对物体特征的抽象，切面是对横切关注点的抽象
~~~java
<aop:aspect>属性
id//切面id
ref//引用的类名，与之前的bean id关联
order//定义的执行顺序，若没有，则以默认顺序执行，即写在前面的先执行
~~~

#### 连接点（Joinpoint）

>被拦截到的方法

#### 通知（Advice）

>指拦截到拦截点后要执行的代码：分为前置（before）、后置（afterreturn）、环绕（around）、异常（throw）、最终（after）

#### 切入点（Pointcut）

>对拦截点进行拦截的定义

#### 引入（Introductions）

>在不修改代码的前提下，引入可以在运行期为类动态的添加一些方法或者字段

    **所有基于配置文件的aspect只支持单例模式**

#### 目标对象(TargetObject)

>代理的目标对象

#### AOP代理(AOP Proxy)

*	JDK动态代理（基于接口的代理）
*	CGLib生成代理（基于类的代理）：实现方式是为目标类创建一个子类，使其继承目标类，Spring通过配置子类的委托方法来调用到原来的目标，子类实现了decorator装饰器模式，织入通知

#### 织入(Weaving)

>将切面应用到目标对象并导致代理对象创建的过程

***

## Spring中的AOP

*	提供了EJB（企业级JavaBean）的替代服务
*	OOP和AOP互补====

有接口的AOP和无接口的AOP的区别

*	有接口的AOP使用的是JDK动态代理的方式来实现
*	无接口的AOP使用的是CGLib动态代理的方式来实现

SpringAOP并不是完整的AOP实现，而是为了配合SpringIOC
***


## Schema-based AOP（基于配置的AOP实现）
在每一个AOP和通知点前都要使用aop：config

## Spring AOP API

**参考AOP基本概念**

## AspectJ